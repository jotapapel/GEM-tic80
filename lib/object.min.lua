setfenv=setfenv or function(a,b)for c=1,math.huge do local d=debug.getupvalue(a,c)if d==nil then break elseif d=="_ENV"then debug.upvaluejoin(a,c,function()return b end,1)break end end;return a end;function table.define(a,b,c)setfenv(b,setmetatable(c or{self=a},{__index=_G,__newindex=a}))()return a end;local e=table.define({},function()local function f(self,g)return self[g]end;local function h(self,i)for g,j in pairs(i)do self[g]=j end end;local function k(self)return tostring(self):match("^.-%s(.-)$")end;function struct(l)return table.define({},l)end;function prototype(m,n)local o,p=n and m,n or m;local prototype=setmetatable({super=o,get=f,set=h,hash=k},{__index=o})return table.define(prototype,p,{self=prototype,super=o})end;function create(prototype,...)local e=setmetatable({prototype=prototype},{__index=prototype})if type(prototype.constructor)=="function"then prototype.constructor(e,...)end;return e end end)