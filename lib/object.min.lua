setfenv=setfenv or function(a,b)for c=1,math.huge do local d=debug.getupvalue(a,c)if d==nil then break elseif d=="_ENV"then debug.upvaluejoin(a,c,function()return b end,1)break end end;return a end;function table.define(a,b,c)setfenv(b,setmetatable(c or{self=a},{__index=_G,__newindex=a}))()return a end;object=table.define({},function()local function e(self,f)return self[f]end;local function g(self,h)for f,i in pairs(h)do self[f]=i end end;local function j(self)return tostring(self):match("^.-%s(.-)$")end;function struct(k)return table.define({},k)end;function prototype(l,m)local n,o=m and l,m or l;local prototype=setmetatable({super=n,get=e,set=g,hash=j},{__index=n})return table.define(prototype,o,{self=prototype,super=n})end;function create(prototype,...)local object=setmetatable({prototype=prototype},{__index=prototype})if type(prototype.constructor)=="function"then prototype.constructor(object,...)end;return object end end)